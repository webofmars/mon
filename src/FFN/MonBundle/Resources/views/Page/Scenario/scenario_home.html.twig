{% extends 'FFNMonBundle::layout.html.twig' %}

{% set section = 'scenario' %}
{% set nb_controls = controls|length %}

{% block body %}
  <div class="container">

    {% include 'FFNMonBundle:Common:project_headerbar.html.twig' %}
    <div>
      <h1><small>{{ 'mon_control_list' | trans({}, 'messages') | raw }}</small></h1>
    </div>
    <div class="row-fluid">
      <div class="span12 pagination-centered blue-outline" >
          <b>&plus;</b>
          <a class="btn" href="{{path('mon_control_add', {'id': scenario.getIdScenario})}}">{{ 'mon_control_create' | trans() | raw()}}</a>
      </div>
    </div>

   {% if nb_controls > 0 %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th>{{'mon_identifier' | trans({}, 'messages') | raw }}</th>
          <th>{{'mon_name'       | trans({}, 'messages') | raw }}</th>
          <th>{{'mon_weather'    | trans({}, 'messages') | raw }}</th>
          <th>{{'mon_actions'    | trans({}, 'messages') | raw }}</th>
        </tr>
      </thead>
      <tbody>
        {% for control in controls %}
        <tr>
          <td>{{control.getIdControl}}</td>
          <td><a href="{{ path( 'mon_graph_simple', {control_id: control.getIdControl})
                }}">{{ control.getControlEntity.name}}</a>
          </td>
          <td>
              {% if control.getWeatherEntity == false %}
                <span class="icoUnknown"></span>
              {% elseif control.getWeatherEntity.weatherState == 1 %}
                <span class="icoStorm"></span>
              {% elseif control.getWeatherEntity.weatherState == 2 %}
                <span class="icoRain"></span>
              {% elseif control.getWeatherEntity.weatherState == 3 %}
                <span class="icoCloud"></span>
              {% elseif control.getWeatherEntity.weatherState == 4 %}
                <span class="icoSun"></span>
              {% elseif control.getWeatherEntity.weatherState == 5 %}
                <span class="icoUnknown"></span>
              {% endif %}
          </td>
          <td>
            <a class="btn" href="{{path('mon_control_edit', {'id': control.getIdControl})}}">{{ 'mon_control_edit' | trans() | raw()}}</a>
            <a class="btn" onclick="showConfirmDelete('{{path('mon_control_delete', {'id': control.getIdControl})}}');">{{ 'mon_control_delete' | trans() | raw()}}</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}

  </div> <!-- /container -->

  <!-- Validation of control deletion -->
  <div id="myModal" class="modal hide fade">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      <h3>{{ 'mon_control_deletion_confirm' | trans({}, 'messages') | raw }}</h3>
    </div>
    <div class="modal-footer">
      <a href="#" class="btn" onclick="$('#myModal').modal('hide');">{{ 'mon_no' | trans({}, 'messages') | raw }}</a>
      <a href="{{path("mon_home")}}" id="button_submit_cancel" class="btn btn-primary">{{ 'mon_yes' | trans({}, 'messages') | raw }}</a>
    </div>
  </div>
  <!-- / Validation of control deletion -->

{% endblock %}