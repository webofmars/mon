{% extends 'FFNMonBundle::layout.html.twig' %}

{% set section = 'scenario' %}
{% set nb_controls = controls|length %}

{% block body %}
  <div class="container">

    {% include 'FFNMonBundle:Common:project_headerbar.html.twig' %}
    <div class="row">
      {% if app.session.hasFlash('success_msg') %}
        <div class="alert alert-success">
          {{ app.session.flash('success_msg') }}
        </div>
      {% endif %}
      {% if app.session.hasFlash('error_msg') %}
        <div class="alert alert-error">
          {{ app.session.flash('error_msg') }}
        </div>
      {% endif %}
    </div>
    <div>
      <h1><small>{{ 'mon_control_list' | trans({}, 'messages') | raw }}</small></h1>
    </div>

    <div class="container">
      <a class="btn" href="{{path('mon_control_add', {'id': scenario.id})}}">{{ 'mon_control_create' | trans() | raw()}}</a>
    </div>

   {% if nb_controls > 0 %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th>{{'mon_identifier' | trans({}, 'messages') | raw }}</th>
          <th>{{'mon_name'       | trans({}, 'messages') | raw }}</th>
          <th>{{'mon_weather'    | trans({}, 'messages') | raw }}</th>
          <th>{{'mon_actions'    | trans({}, 'messages') | raw }}</th>
        </tr>
      </thead>
      <tbody>
        {% for control in controls %}
        <tr>
          <td>{{control.id}}</td>
          <td><a href="{{ path( 'mon_graph', {control_id: control.id,
                                                startTs: startTs,
                                                stopTs:  stopTs })
                }}">{{ control.name}}</a>
          </td>
          <td>
              {% if weather == 1 %}
                  <span class="icoStorm"></span>
              {% elseif weather == 2 %}
                  <span class="icoRain"></span>
              {% elseif weather == 3 %}
                  <span class="icoCloud"></span>
              {% elseif weather == 4 %}
                  <span class="icoSun"></span>
              {% elseif weather == 5 %}
                  <span class="icoUnknown">?</span>
              {% endif %}
          </td>
          <td>
            <a class="btn" href="{{path('mon_control_edit', {'id': control.id})}}">{{ 'mon_control_edit' | trans() | raw()}}</a>
            <a class="btn" href="{{path('mon_control_delete', {'id': control.id})}}">{{ 'mon_control_delete' | trans() | raw()}}</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}

  </div> <!-- /container -->
{% endblock %}